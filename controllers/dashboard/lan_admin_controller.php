<?php

require_once(__DIR__ . './../../config/init.php');
require_once(__DIR__ . './../../helpers/FormValidator.php');


// ===================================================================================================================
// -------------------------------------------------------------------------------------------------------------------

try {

    // ------------------------------------------------
    // SEO
    // ------------------------------------------------
    $document_title = TITLES['connection'];
    // ------------------------------------------------


    if ($_SERVER['REQUEST_METHOD'] == 'POST') {
        
        // ===================================================================================================================================
        // VÉRIFICATION DE LA CONNEXION
        // ===================================================================================================================================

        $account = FormValidator::validate_connexion();


        // ===================================================================================================================================
        // REDIRECTION VERS LA GESTION ADMINISTRATEUR EN CAS DE CRÉATION DE SESSION UTILISATEUR
        // ===================================================================================================================================

        if (isset($_SESSION['user'])) {
            header('location: /gestion/mon-compte');
            die;
        }
    }

    // ------------------------------------------------
    // Nom des fichiers js nécessaire au fonctionnement
    // ------------------------------------------------
    $js = ['form', 'connexion'];
    // ------------------------------------------------


} catch (\Throwable $th) {
    include_once(__DIR__ . './../../views/templates/header.php');
    include_once(__DIR__ . './../../views/error.php');
    include_once(__DIR__ . './../../views/templates/footer.php');
    die;
}



// ===================================================================================================================
// -------------------------------------------------------------------------------------------------------------------
// AFFICHAGE DES VUES

include_once(__DIR__ . './../../views/templates/header.php');

include(__DIR__ . './../../views/dashboard/lan_admin.php');

include_once(__DIR__ . './../../views/templates/footer.php');